(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,24687,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(75157);let s=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("textarea",{className:(0,a.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...r}));s.displayName="Textarea",e.s(["Textarea",()=>s])},9642,e=>{"use strict";var t=e.i(95187);let r=(0,t.createServerReference)("4003297ed52adc7ccc6e3b84f9b58ca9e867754422",t.callServer,void 0,t.findSourceMapURL,"createUserAndSetSession");e.s(["createUserAndSetSession",()=>r])},66531,e=>{"use strict";let t=(0,e.i(75254).default)("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);e.s(["UploadCloud",()=>t],66531)},43695,e=>{"use strict";var t=e.i(43476),r=e.i(932),a=e.i(15288),s=e.i(18566),i=e.i(19455),l=e.i(93479),n=e.i(10204),o=e.i(24687),c=e.i(67489),d=e.i(85149),m=e.i(71645),u=e.i(8406),p=e.i(31278),g=e.i(66531),h=e.i(57688),f=e.i(75157);async function x(e){return new Promise((t,r)=>{let a=new FileReader;a.onload=a=>{let s=document.createElement("img");s.onload=()=>{let a=document.createElement("canvas"),{width:i,height:l}=s;i>l?i>200&&(l=Math.round(200*l/i),i=200):l>200&&(i=Math.round(200*i/l),l=200),a.width=i,a.height=l;let n=a.getContext("2d");if(!n)return r(Error("Could not get canvas context"));n.drawImage(s,0,0,i,l),a.toBlob(a=>{a?t(new File([a],e.name,{type:"image/webp",lastModified:Date.now()})):r(Error("Canvas to Blob conversion failed"))},"image/webp",.8)},s.src=a.target?.result},a.readAsDataURL(e)})}function y(e){let a,s,i,l,n,o,c,d,p,y,v,b,j=(0,r.c)(24),{onFileChange:w}=e,[S,N]=(0,m.useState)(null),[C,I]=(0,m.useState)(!1),D=(0,m.useRef)(null),{toast:R}=(0,u.useToast)();j[0]!==w||j[1]!==R?(a=e=>{e&&("image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type)&&x(e).then(e=>{let t=new FileReader;t.onload=e=>{N(e.target?.result)},t.readAsDataURL(e),w(e)}).catch(e=>{console.error("Image resize failed:",e),R({title:"Image resize failed",description:e.message,variant:"destructive"})})},j[0]=w,j[1]=R,j[2]=a):a=j[2];let F=a;j[3]===Symbol.for("react.memo_cache_sentinel")?(s=e=>{e.preventDefault(),I(!0)},j[3]=s):s=j[3];let L=s;j[4]===Symbol.for("react.memo_cache_sentinel")?(i=e=>{e.preventDefault(),I(!1)},j[4]=i):i=j[4];let T=i;j[5]!==F?(l=e=>{e.preventDefault(),I(!1),F(e.dataTransfer.files[0])},j[5]=F,j[6]=l):l=j[6];let A=l;j[7]!==F?(n=e=>{F(e.target.files?.[0]||null)},j[7]=F,j[8]=n):n=j[8];let U=n;j[9]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{D.current?.click()},j[9]=o):o=j[9];let _=o,k=C?"border-primary bg-accent":"border-border";return j[10]!==k?(c=(0,f.cn)("w-48 h-48 border-2 border-dashed rounded-full flex flex-col items-center justify-center text-muted-foreground cursor-pointer transition-colors relative overflow-hidden",k),j[10]=k,j[11]=c):c=j[11],j[12]!==S?(d=S?(0,t.jsx)(h.default,{src:S,alt:"Company Logo",width:192,height:192,className:"rounded-full object-cover w-full h-full"}):(0,t.jsxs)("div",{className:"text-center p-4",children:[(0,t.jsx)(g.UploadCloud,{className:"mx-auto h-10 w-10 mb-2"}),(0,t.jsx)("p",{className:"text-sm",children:"Drag & drop logo"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground/80 mt-1",children:"or click to browse"})]}),j[12]=S,j[13]=d):d=j[13],j[14]!==U?(p=(0,t.jsx)("input",{ref:D,type:"file",className:"hidden",accept:"image/jpeg, image/png, image/gif",onChange:U}),j[14]=U,j[15]=p):p=j[15],j[16]!==A||j[17]!==p||j[18]!==c||j[19]!==d?(y=(0,t.jsxs)("div",{className:c,onDragOver:L,onDragLeave:T,onDrop:A,onClick:_,children:[d,p]}),j[16]=A,j[17]=p,j[18]=c,j[19]=d,j[20]=y):y=j[20],j[21]===Symbol.for("react.memo_cache_sentinel")?(v=(0,t.jsx)("p",{className:"text-xs text-muted-foreground px-4 text-center",children:"Recommended: 200x200px. JPG, PNG, or GIF."}),j[21]=v):v=j[21],j[22]!==y?(b=(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[y,v]}),j[22]=y,j[23]=b):b=j[23],b}e.i(11981);var v=e.i(61480),b=e.i(10370),j=e.i(57094);e.i(51718);var w=e.i(78513);e.i(36180);var S=e.i(17875),N=e.i(9642);function C(){let e=(0,s.useRouter)(),{toast:r}=(0,u.useToast)(),[a,g]=(0,m.useState)(!1),[h,f]=(0,m.useState)(null),x=(0,v.useAuth)(),C=(0,v.useFirestore)();(0,m.useEffect)(()=>{sessionStorage.getItem("registrationDetails")||e.push("/register")},[e]);let I=async t=>{if(t.preventDefault(),!x||!C)return void r({title:"System Initializing...",variant:"destructive"});g(!0);let a=sessionStorage.getItem("registrationDetails");if(!a){r({title:"Registration Error",description:"Session expired.",variant:"destructive"}),e.push("/register");return}let s=JSON.parse(a),i=new FormData(t.currentTarget);try{let{user:t}=await (0,w.createUserWithEmailAndPassword)(x,s.email,s.password),r=(0,S.doc)((0,S.collection)(C,"startups")),a=r.id,l=i.get("companyName"),n={id:a,companyName:l,companyLogoUrl:`https://picsum.photos/seed/${l.toLowerCase().replace(/\s/g,"-")}/200/200`,founderIds:[t.uid],industry:i.get("industry"),stage:i.get("stage"),tagline:i.get("tagline"),description:i.get("description"),website:i.get("website"),financials:{companyName:l,revenue:0,expenses:0,netIncome:0,grossProfitMargin:0,ebitda:0,customerAcquisitionCost:0,customerLifetimeValue:0,monthlyRecurringRevenue:0,cashBurnRate:0,runway:0},monthlyFinancials:[],capTable:[],incorporationDetails:{isIncorporated:!1}};await (0,S.setDoc)(r,n);let o={id:t.uid,email:t.email,name:s.name,role:"founder",avatarUrl:"https://picsum.photos/seed/new-founder-avatar/400/400",profile:{companyId:a,isLead:!0,isPremium:!1,title:"Founder"}},c=(0,S.doc)(C,"users",t.uid);await (0,S.setDoc)(c,o).catch(e=>{let t=new b.FirestorePermissionError({path:c.path,operation:"create",requestResourceData:o});throw j.errorEmitter.emit("permission-error",t),t});let d=await t.getIdToken(),m=await (0,N.createUserAndSetSession)(d);if(m.success)sessionStorage.removeItem("registrationDetails"),e.push("/dashboard");else throw Error(m.error||"Session creation failed.")}catch(e){r({title:"Registration Failed",description:e.message,variant:"destructive"})}finally{g(!1)}};return(0,t.jsxs)("form",{onSubmit:I,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"md:col-span-1",children:[(0,t.jsx)(n.Label,{className:"mb-2 block text-center",children:"Company Logo"}),(0,t.jsx)(y,{onFileChange:f})]}),(0,t.jsxs)("div",{className:"md:col-span-2 space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"companyName",children:"Company Name"}),(0,t.jsx)(l.Input,{id:"companyName",name:"companyName",placeholder:"e.g., InnovateAI",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"tagline",children:"Company Tagline"}),(0,t.jsx)(l.Input,{id:"tagline",name:"tagline",placeholder:"e.g., AI for everyone",required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"industry",children:"Industry"}),(0,t.jsx)(l.Input,{id:"industry",name:"industry",placeholder:"e.g., Artificial Intelligence",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"stage",children:"Stage"}),(0,t.jsxs)(c.Select,{name:"stage",required:!0,children:[(0,t.jsx)(c.SelectTrigger,{children:(0,t.jsx)(c.SelectValue,{placeholder:"Select your startup's stage"})}),(0,t.jsx)(c.SelectContent,{children:d.investmentStages.map(e=>(0,t.jsx)(c.SelectItem,{value:e,children:e},e))})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"website",children:"Website"}),(0,t.jsx)(l.Input,{id:"website",name:"website",type:"url",placeholder:"https://...",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"description",children:"Company Description"}),(0,t.jsx)(o.Textarea,{id:"description",name:"description",placeholder:"What does your company do?",required:!0})]})]})]}),(0,t.jsxs)(i.Button,{type:"submit",className:"w-full",disabled:a,children:[a&&(0,t.jsx)(p.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Complete Registration"]})]})}function I(){let e,s,i=(0,r.c)(2);return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsxs)(a.CardHeader,{children:[(0,t.jsx)(a.CardTitle,{children:"Setup your Founder Profile"}),(0,t.jsx)(a.CardDescription,{children:"Tell us about your startup. This information will help investors and talent find you."})]}),i[0]=e):e=i[0],i[1]===Symbol.for("react.memo_cache_sentinel")?(s=(0,t.jsxs)(a.Card,{className:"w-full max-w-2xl",children:[e,(0,t.jsx)(a.CardContent,{children:(0,t.jsx)(C,{})})]}),i[1]=s):s=i[1],s}e.s(["default",()=>I],43695)}]);