(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[109],{3998:(e,r,t)=>{"use strict";t.d(r,{$:()=>d,r:()=>o});var s=t(95155),a=t(12115),i=t(32467),n=t(83101),l=t(64269);let o=(0,n.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,r)=>{let{className:t,variant:a,size:n,asChild:d=!1,...u}=e,c=d?i.DX:"button";return(0,s.jsx)(c,{className:(0,l.cn)(o({variant:a,size:n,className:t})),ref:r,...u})});d.displayName="Button"},5761:(e,r,t)=>{"use strict";t.r(r),t.d(r,{FirebaseClientProvider:()=>g,FirebaseContext:()=>f,FirebaseProvider:()=>p,FirestorePermissionError:()=>y,errorEmitter:()=>u,getSdks:()=>E,initializeFirebase:()=>S,useAuth:()=>h,useCollection:()=>j,useDoc:()=>w,useFirebase:()=>m,useFirebaseApp:()=>v,useFirestore:()=>x,useMemoFirebase:()=>b,useUser:()=>N});let s={apiKey:"AIzaSyCUgXy6tmPnuyD0w6TmPwXDHGiUm_Id4yc",authDomain:"studio-8509111427-a45a7.firebaseapp.com",projectId:"studio-8509111427-a45a7",storageBucket:"studio-8509111427-a45a7.appspot.com",messagingSenderId:"866288675038",appId:"1:866288675038:web:faff2fb1b41f0e10f47a4f"};var a=t(52078),i=t(59253),n=t(19708),l=t(58134),o=t(95155),d=t(12115);let u=function(){let e={};return{on(r,t){var s;e[r]||(e[r]=[]),null==(s=e[r])||s.push(t)},off(r,t){var s;e[r]&&(e[r]=null==(s=e[r])?void 0:s.filter(e=>e!==t))},emit(r,t){var s;e[r]&&(null==(s=e[r])||s.forEach(e=>e(t)))}}}();function c(){let[e,r]=(0,d.useState)(null);if((0,d.useEffect)(()=>{let e=e=>{r(e)};return u.on("permission-error",e),()=>{u.off("permission-error",e)}},[]),e)throw e;return null}let f=(0,d.createContext)(void 0),p=e=>{let{children:r,firebaseApp:t,firestore:s,auth:a}=e,[n,l]=(0,d.useState)({user:null,isUserLoading:!0,userError:null});(0,d.useEffect)(()=>{if(!a)return void l({user:null,isUserLoading:!1,userError:Error("Auth service not provided.")});let e=(0,i.hg)(a,e=>{l({user:e,isUserLoading:!1,userError:null})},e=>{console.error("FirebaseProvider: onAuthStateChanged error:",e),l({user:null,isUserLoading:!1,userError:e})});return()=>e()},[a]);let u=(0,d.useMemo)(()=>{let e=!!(t&&s&&a);return{areServicesAvailable:e,firebaseApp:e?t:null,firestore:e?s:null,auth:e?a:null,user:n.user,isUserLoading:n.isUserLoading,userError:n.userError}},[t,s,a,n]);return(0,o.jsxs)(f.Provider,{value:u,children:[(0,o.jsx)(c,{}),r]})},m=()=>{let e=(0,d.useContext)(f);if(void 0===e)throw Error("useFirebase must be used within a FirebaseProvider.");if(!e.areServicesAvailable||!e.firebaseApp||!e.firestore||!e.auth)throw Error("Firebase core services not available. Check FirebaseProvider props.");return{firebaseApp:e.firebaseApp,firestore:e.firestore,auth:e.auth,user:e.user,isUserLoading:e.isUserLoading,userError:e.userError}},h=()=>{let{auth:e}=m();return e},x=()=>{let{firestore:e}=m();return e},v=()=>{let{firebaseApp:e}=m();return e};function b(e,r){let t=(0,d.useMemo)(e,r);return"object"!=typeof t||null===t||(t.__memo=!0),t}function g(e){let{children:r}=e,t=(0,d.useMemo)(()=>S(),[]);return(0,o.jsx)(p,{firebaseApp:t.firebaseApp,auth:t.auth,firestore:t.firestore,children:r})}class y extends Error{constructor(e){let r=function(e){let r=null;try{let e=(0,i.xI)().currentUser;e&&(r=function(e){var r;if(!e)return null;let t={name:e.displayName,email:e.email,email_verified:e.emailVerified,phone_number:e.phoneNumber,sub:e.uid,firebase:{identities:e.providerData.reduce((e,r)=>(r.providerId&&(e[r.providerId]=[r.uid]),e),{}),sign_in_provider:(null==(r=e.providerData[0])?void 0:r.providerId)||"custom",tenant:e.tenantId}};return{uid:e.uid,token:t}}(e))}catch(e){}return{auth:r,method:e.operation,path:"/databases/(default)/documents/".concat(e.path),resource:e.requestResourceData?{data:e.requestResourceData}:void 0}}(e);super("Missing or insufficient permissions: The following request was denied by Firestore Security Rules:\n".concat(JSON.stringify(r,null,2))),this.name="FirebaseError",this.request=r}}function j(e){let[r,t]=(0,d.useState)(null),[s,a]=(0,d.useState)(!0),[i,l]=(0,d.useState)(null);if((0,d.useEffect)(()=>{if(!e){t(null),a(!1),l(null);return}a(!0),l(null);let r=(0,n.aQ)(e,e=>{let r=[];for(let t of e.docs)r.push({...t.data(),id:t.id});t(r),l(null),a(!1)},r=>{let s=new y({operation:"list",path:"collection"===e.type?e.path:e._query.path.canonicalString()});l(s),t(null),a(!1),u.emit("permission-error",s)});return()=>r()},[e]),e&&!e.__memo)throw Error("useCollection query was not properly memoized using useMemoFirebase");return{data:r,isLoading:s,error:i}}function w(e){let[r,t]=(0,d.useState)(null),[s,a]=(0,d.useState)(!0),[i,l]=(0,d.useState)(null);if((0,d.useEffect)(()=>{if(!e){t(null),a(!1),l(null);return}a(!0),l(null);let r=(0,n.aQ)(e,e=>{e.exists()?t({...e.data(),id:e.id}):t(null),l(null),a(!1)},r=>{let s=new y({operation:"get",path:e.path});l(s),t(null),a(!1),u.emit("permission-error",s)});return()=>r()},[e]),e&&!e.__memo)throw Error("useDoc query was not properly memoized using useMemoFirebase");return{data:r,isLoading:s,error:i}}let N=()=>{let{user:e,isUserLoading:r,userError:t}=m();return{user:e,isUserLoading:r,userError:t}};function S(){return(0,a.Dk)().length>0?E((0,a.Sx)()):E((0,a.Wp)(s))}function E(e){return{firebaseApp:e,auth:(0,i.xI)(e),firestore:(0,n.aU)(e),storage:(0,l.c7)(e)}}},15894:(e,r,t)=>{"use strict";t.d(r,{dj:()=>c});var s=t(12115);let a=0,i=new Map,n=e=>{if(i.has(e))return;let r=setTimeout(()=>{i.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,r)},l=[],o={toasts:[]};function d(e){o=((e,r)=>{switch(r.type){case"ADD_TOAST":return{...e,toasts:[r.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===r.toast.id?{...e,...r.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=r;return t?n(t):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===r.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==r.toastId)}}})(o,e),l.forEach(e=>{e(o)})}function u(e){let{...r}=e,t=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:t});return d({type:"ADD_TOAST",toast:{...r,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function c(){let[e,r]=s.useState(o);return s.useEffect(()=>(l.push(r),()=>{let e=l.indexOf(r);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},20243:(e,r,t)=>{"use strict";t.d(r,{E:()=>i});var s=t(95155),a=t(64269);function i(e){let{className:r,...t}=e;return(0,s.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",r),...t})}},27255:(e,r,t)=>{"use strict";t.d(r,{H:()=>a});var s=t(30926);let a=(0,s.createServerReference)("00ebc297e0a702443624bfbf7cb91eaa1ed8b39480",s.callServer,void 0,s.findSourceMapURL,"getCurrentUser")},31554:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>S});var s=t(95155),a=t(12115),i=t(86948),n=t(52619),l=t.n(n),o=t(3998),d=t(64269),u=t(92649),c=t(92925),f=t(92033),p=t(65142),m=t(76444),h=t(15894),x=t(98053),v=t(27255),b=t(20243),g=t(5761),y=t(20063),j=t(72970),w=t(30926);let N=(0,w.createServerReference)("70926ab4be52d5249d16ae6a5ad68a9cf10bfe71ab",w.callServer,void 0,w.findSourceMapURL,"deleteCurrentUserAccount");function S(){let{toast:e}=(0,h.dj)(),{user:r}=(0,g.useUser)(),[t,n]=(0,a.useState)(null),[w,S]=(0,a.useState)(!0),[E,A]=(0,a.useState)(!1),R=(0,y.useRouter)();(0,a.useEffect)(()=>{r?(0,v.H)().then(e=>{e&&n(e),S(!1)}):S(!1)},[r]);let T=async()=>{var r;if(A(!0),!t){e({title:"Error",description:"Could not delete account. User not found.",variant:"destructive"}),A(!1);return}let s=await N(t.id,t.role,null==(r=t.profile)?void 0:r.companyId);A(!1),s.success?(e({title:"Account Deleted",description:"Your account and all associated data have been permanently deleted."}),await (0,j.r)(),R.push("/register")):e({title:"Error Deleting Account",description:s.error||"An unexpected error occurred.",variant:"destructive"})};if(w||!t)return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(b.E,{className:"h-8 w-32 mb-2"}),(0,s.jsx)(b.E,{className:"h-4 w-72"})]}),(0,s.jsx)(b.E,{className:"h-48 w-full"}),(0,s.jsx)(b.E,{className:"h-64 w-full"})]});let C="founder"===t.role,D=C&&t.profile.isPremium;return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold font-headline",children:"Settings"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Manage your account settings and view legal agreements."})]}),C&&(0,s.jsxs)(i.Zp,{children:[(0,s.jsxs)(i.aR,{children:[(0,s.jsx)(i.ZB,{children:"Oki+ Subscription"}),(0,s.jsx)(i.BT,{children:D?"You are an Oki+ member. Manage your subscription and payment details.":"Upgrade to Oki+ to unlock premium features and accelerate your startup's growth."})]}),(0,s.jsx)(i.Wu,{children:(0,s.jsx)(o.$,{asChild:!0,children:(0,s.jsxs)(l(),{href:"/settings/billing",children:[D?"Manage Subscription":"Upgrade to Oki+",!D&&(0,s.jsx)(u.A,{className:"ml-2 h-4 w-4"})]})})})]}),(0,s.jsx)(i.Zp,{children:(0,s.jsxs)("form",{onSubmit:r=>{r.preventDefault(),e({title:"Settings Saved",description:"Your login and security settings have been updated."})},children:[(0,s.jsxs)(i.aR,{children:[(0,s.jsx)(i.ZB,{children:"Login & Security"}),(0,s.jsx)(i.BT,{children:"Update your email and password."})]}),(0,s.jsxs)(i.Wu,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(m.J,{htmlFor:"email",children:"Email Address"}),(0,s.jsx)(p.p,{id:"email",type:"email",defaultValue:t.email})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(m.J,{htmlFor:"current-password",children:"Current Password"}),(0,s.jsx)(p.p,{id:"current-password",type:"password"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(m.J,{htmlFor:"new-password",children:"New Password"}),(0,s.jsx)(p.p,{id:"new-password",type:"password"})]})]}),(0,s.jsx)(i.wL,{children:(0,s.jsx)(o.$,{type:"submit",children:"Save Changes"})})]})}),(0,s.jsxs)(i.Zp,{children:[(0,s.jsxs)(i.aR,{children:[(0,s.jsx)(i.ZB,{children:"Legal Agreements"}),(0,s.jsx)(i.BT,{children:"Below are the terms and policies that govern your use of Okidex."})]}),(0,s.jsxs)(i.Wu,{className:"space-y-4",children:[(0,s.jsxs)(l(),{href:"/legal/user-agreement",target:"_blank",className:(0,d.cn)((0,o.r)({variant:"outline"}),"w-full justify-between"),children:["Okidex User Agreement",(0,s.jsx)(c.A,{className:"w-4 h-4"})]}),(0,s.jsxs)(l(),{href:"/legal/privacy-policy",target:"_blank",className:(0,d.cn)((0,o.r)({variant:"outline"}),"w-full justify-between"),children:["Okidex Privacy Policy",(0,s.jsx)(c.A,{className:"w-4 h-4"})]})]})]}),(0,s.jsxs)(i.Zp,{className:"border-destructive",children:[(0,s.jsxs)(i.aR,{children:[(0,s.jsx)(i.ZB,{children:"Danger Zone"}),(0,s.jsx)(i.BT,{children:"These actions are permanent and cannot be undone."})]}),(0,s.jsx)(i.Wu,{children:(0,s.jsxs)(x.Lt,{children:[(0,s.jsx)(x.tv,{asChild:!0,children:(0,s.jsx)(o.$,{variant:"destructive",children:"Delete Account"})}),(0,s.jsxs)(x.EO,{children:[(0,s.jsxs)(x.wd,{children:[(0,s.jsx)(x.r7,{children:"Are you absolutely sure?"}),(0,s.jsx)(x.$v,{children:"This action cannot be undone. This will permanently delete your account and remove your data from our servers."})]}),(0,s.jsxs)(x.ck,{children:[(0,s.jsx)(x.Zr,{disabled:E,children:"Cancel"}),(0,s.jsxs)(x.Rx,{onClick:T,disabled:E,children:[E&&(0,s.jsx)(f.A,{className:"mr-2 h-4 w-4 animate-spin"}),E?"Deleting...":"Continue"]})]})]})]})})]})]})}},64269:(e,r,t)=>{"use strict";t.d(r,{cn:()=>i});var s=t(2821),a=t(75889);function i(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.QP)((0,s.$)(r))}},65142:(e,r,t)=>{"use strict";t.d(r,{p:()=>n});var s=t(95155),a=t(12115),i=t(64269);let n=a.forwardRef((e,r)=>{let{className:t,type:a,...n}=e;return(0,s.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n})});n.displayName="Input"},72970:(e,r,t)=>{"use strict";t.d(r,{r:()=>a});var s=t(30926);let a=(0,s.createServerReference)("00267ae1229b72fc29c5a76762d41d9141f738e6ea",s.callServer,void 0,s.findSourceMapURL,"logout")},76444:(e,r,t)=>{"use strict";t.d(r,{J:()=>d});var s=t(95155),a=t(12115),i=t(10489),n=t(83101),l=t(64269);let o=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(i.b,{ref:r,className:(0,l.cn)(o(),t),...a})});d.displayName=i.b.displayName},86948:(e,r,t)=>{"use strict";t.d(r,{BT:()=>d,Wu:()=>u,ZB:()=>o,Zp:()=>n,aR:()=>l,wL:()=>c});var s=t(95155),a=t(12115),i=t(64269);let n=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});n.displayName="Card";let l=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t),...a})});l.displayName="CardHeader";let o=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("h3",{ref:r,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});o.displayName="CardTitle";let d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("p",{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",t),...a})});d.displayName="CardDescription";let u=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.cn)("p-6 pt-0",t),...a})});u.displayName="CardContent";let c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.cn)(" flex items-center p-6 pt-0",t),...a})});c.displayName="CardFooter"},91977:(e,r,t)=>{Promise.resolve().then(t.bind(t,31554))},98053:(e,r,t)=>{"use strict";t.d(r,{$v:()=>x,EO:()=>f,Lt:()=>o,Rx:()=>v,Zr:()=>b,ck:()=>m,r7:()=>h,tv:()=>d,wd:()=>p});var s=t(95155),a=t(12115),i=t(35646),n=t(64269),l=t(3998);let o=i.bL,d=i.l9,u=i.ZL,c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(i.hJ,{className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...a,ref:r})});c.displayName=i.hJ.displayName;let f=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsxs)(u,{children:[(0,s.jsx)(c,{}),(0,s.jsx)(i.UC,{ref:r,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...a})]})});f.displayName=i.UC.displayName;let p=e=>{let{className:r,...t}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",r),...t})};p.displayName="AlertDialogHeader";let m=e=>{let{className:r,...t}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",r),...t})};m.displayName="AlertDialogFooter";let h=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(i.hE,{ref:r,className:(0,n.cn)("text-lg font-semibold",t),...a})});h.displayName=i.hE.displayName;let x=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(i.VY,{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",t),...a})});x.displayName=i.VY.displayName;let v=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(i.rc,{ref:r,className:(0,n.cn)((0,l.r)(),t),...a})});v.displayName=i.rc.displayName;let b=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(i.ZD,{ref:r,className:(0,n.cn)((0,l.r)({variant:"outline"}),"mt-2 sm:mt-0",t),...a})});b.displayName=i.ZD.displayName}},e=>{e.O(0,[2992,7138,4909,3947,2619,2248,4341,1936,8441,1255,7358],()=>e(e.s=91977)),_N_E=e.O()}]);